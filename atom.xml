<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://Eakamm.github.io</id>
    <title>åˆ˜å¿—è±ªçš„åšå®¢</title>
    <updated>2020-10-22T02:25:38.616Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://Eakamm.github.io"/>
    <link rel="self" href="https://Eakamm.github.io/atom.xml"/>
    <subtitle>æ¸©æ•…è€ŒçŸ¥æ–°</subtitle>
    <logo>https://Eakamm.github.io/images/avatar.png</logo>
    <icon>https://Eakamm.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, åˆ˜å¿—è±ªçš„åšå®¢</rights>
    <entry>
        <title type="html"><![CDATA[Lombokçš„å‘å¤§å°å†™é—®é¢˜]]></title>
        <id>https://Eakamm.github.io/post/lombok-de-keng-da-xiao-xie-wen-ti/</id>
        <link href="https://Eakamm.github.io/post/lombok-de-keng-da-xiao-xie-wen-ti/">
        </link>
        <updated>2020-10-22T01:56:50.000Z</updated>
        <summary type="html"><![CDATA[<p>åœ¨æˆ‘ä½¿ç”¨postè¯·æ±‚æäº¤æ•°æ®çš„æ—¶å€™ï¼Œä½¿ç”¨@Dataæ³¨é‡Šçš„å®ä½“ç±»setæ–¹æ³•ä¸èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œé€šè¿‡æŸ¥æ‰¾èµ„æ–™å‘ç°æ˜¯å¤§å°å†™é—®é¢˜ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>åœ¨æˆ‘ä½¿ç”¨postè¯·æ±‚æäº¤æ•°æ®çš„æ—¶å€™ï¼Œä½¿ç”¨@Dataæ³¨é‡Šçš„å®ä½“ç±»setæ–¹æ³•ä¸èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œé€šè¿‡æŸ¥æ‰¾èµ„æ–™å‘ç°æ˜¯å¤§å°å†™é—®é¢˜ã€‚</p>
<!-- more -->
<p>æˆ‘Postæäº¤çš„è¯·æ±‚æ•°æ®æ˜¯</p>
<pre><code class="language-json">{
      &quot;vId&quot;: 1,
     &quot;dIds&quot;: [6,7]
}
</code></pre>
<p>åç«¯çš„å®ä½“ç±»ä¸ºVoteDetailRelVoï¼Œä½¿ç”¨äº†@Dataæ³¨è§£ã€‚</p>
<pre><code class="language-java">@Data
public class VoteDetailRelVo {

    private Long vId;

    private List&lt;Long&gt; dIds;
}
</code></pre>
<p>lombokè‡ªåŠ¨ç”Ÿæˆçš„get/setæ–¹æ³•å˜ä¸ºäº†<code>getVId/setVId</code>ä¸<code>getDIds/setDIds</code>ã€‚</p>
<p>ä¸€èˆ¬JavaBeanå±æ€§ä»¥å°å†™å­—æ¯å¼€å¤´ï¼Œé©¼å³°å‘½åæ ¼å¼ï¼Œç›¸åº”çš„ getter/setter æ–¹æ³•æ˜¯ get/set æ¥ä¸Šé¦–å­—æ¯å¤§å†™çš„å±æ€§åã€‚ä¾‹å¦‚ï¼šå±æ€§åä¸ºuserNameï¼Œå…¶å¯¹åº”çš„getter/setter æ–¹æ³•æ˜¯ getUserName/setUserNameã€‚</p>
<p>ä½†æ˜¯ï¼Œè¿˜æœ‰ä¸€äº›ç‰¹æ®Šæƒ…å†µï¼š</p>
<p>1ã€å¦‚æœå±æ€§åçš„ç¬¬äºŒä¸ªå­—æ¯å¤§å†™ï¼Œé‚£ä¹ˆè¯¥å±æ€§åç›´æ¥ç”¨ä½œ getter/setter æ–¹æ³•ä¸­ get/set çš„åéƒ¨åˆ†ï¼Œå°±æ˜¯è¯´å¤§å°å†™ä¸å˜ã€‚ä¾‹å¦‚å±æ€§åä¸ºuNameï¼Œæ–¹æ³•æ˜¯getuName/setuNameã€‚</p>
<p>2ã€å¦‚æœå‰ä¸¤ä¸ªå­—æ¯æ˜¯å¤§å†™ï¼ˆä¸€èˆ¬çš„ä¸“æœ‰åè¯å’Œç¼©ç•¥è¯éƒ½ä¼šå¤§å†™ï¼‰ï¼Œä¹Ÿæ˜¯å±æ€§åç›´æ¥ç”¨ä½œ getter/setter æ–¹æ³•ä¸­ get/set çš„åéƒ¨åˆ†ã€‚ä¾‹å¦‚å±æ€§åä¸ºURLï¼Œæ–¹æ³•æ˜¯getURL/setURLã€‚</p>
<p>3ã€å¦‚æœé¦–å­—æ¯å¤§å†™ï¼Œä¹Ÿæ˜¯å±æ€§åç›´æ¥ç”¨ä½œ getter/setter æ–¹æ³•ä¸­ get/set çš„åéƒ¨åˆ†ã€‚ä¾‹å¦‚å±æ€§åä¸ºNameï¼Œæ–¹æ³•æ˜¯getName/setNameï¼Œè¿™ç§æ˜¯æœ€ç³Ÿç³•çš„æƒ…å†µï¼Œä¼šæ‰¾ä¸åˆ°å±æ€§å‡ºé”™ï¼Œå› ä¸ºé»˜è®¤çš„å±æ€§åæ˜¯nameã€‚</p>
<p>æ‰€ä»¥Lombokç”Ÿæˆçš„çš„get/setæ–¹æ³•ä¼šå‡ºç°é—®é¢˜ã€‚<br>
è¯¦è§£å¯è§https://www.cnblogs.com/sunTin/p/7172932.html</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Java å¸¸ç”¨æ—¶é—´æ¯”è¾ƒæ–¹å¼]]></title>
        <id>https://Eakamm.github.io/post/java-chang-yong-shi-jian-bi-jiao-fang-shi/</id>
        <link href="https://Eakamm.github.io/post/java-chang-yong-shi-jian-bi-jiao-fang-shi/">
        </link>
        <updated>2020-10-19T08:23:13.000Z</updated>
        <summary type="html"><![CDATA[<p>æœ¬æ–‡å°†æè¿°åœ¨javaä¸­è¿›è¡Œæ—¥æœŸæ—¶é—´æ¯”è¾ƒçš„4ç§æ–¹æ³•</p>
]]></summary>
        <content type="html"><![CDATA[<p>æœ¬æ–‡å°†æè¿°åœ¨javaä¸­è¿›è¡Œæ—¥æœŸæ—¶é—´æ¯”è¾ƒçš„4ç§æ–¹æ³•</p>
<!-- more -->
<p><a href="https://c.lanmit.com/bianchengkaifa/Java/59964.html">æœ¬æ–‡åœ°å€ï¼š</a><br>
&gt; æœ¬æ–‡ç”± [ç®€æ‚¦ SimpRead](http://ksria.com/simpread/) è½¬ç ï¼Œ åŸæ–‡åœ°å€ [c.lanmit.com](https://c.lanmit.com/bianchengkaifa/Java/59964.html)</p>
<p>æœ¬æ–‡å°†ä¸ºæ‚¨æè¿°åœ¨ java ä¸­è¿›è¡Œæ—¥æœŸæ—¶é—´æ¯”è¾ƒçš„ 4 ç§æ–¹æ³•, æ•™ç¨‹æ“ä½œæ­¥éª¤:</p>
<p>1. Date.compareToï¼ˆï¼‰</p>
<p><code>java.util.Date</code>æä¾›äº†åœ¨ Java ä¸­æ¯”è¾ƒä¸¤ä¸ªæ—¥æœŸçš„ç»å…¸æ–¹æ³• compareToï¼ˆï¼‰ã€‚</p>
<p>å¦‚æœä¸¤ä¸ªæ—¥æœŸç›¸ç­‰ï¼Œåˆ™è¿”å›å€¼ä¸º 0ã€‚ å¦‚æœ Date åœ¨ date å‚æ•°ä¹‹åï¼Œåˆ™è¿”å›å€¼å¤§äº 0ã€‚ å¦‚æœ Date åœ¨ date å‚æ•°ä¹‹å‰ï¼Œåˆ™è¿”å›å€¼å°äº 0ã€‚</p>
<pre><code>@Test
void testDateCompare() throws ParseException {
  SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);
  Date date1 = sdf.parse(&quot;2009-12-31&quot;);
  Date date2 = sdf.parse(&quot;2019-01-31&quot;);

  System.out.println(&quot;date1 : &quot; + sdf.format(date1));
  System.out.println(&quot;date2 : &quot; + sdf.format(date2));

  if (date1.compareTo(date2) &gt; 0) {
    System.out.println(&quot;Date1 æ—¶é—´åœ¨ Date2 ä¹‹å&quot;);
  } else if (date1.compareTo(date2) &lt; 0) {
    System.out.println(&quot;Date1 æ—¶é—´åœ¨ Date2 ä¹‹å‰&quot;);
  } else if (date1.compareTo(date2) == 0) {
    System.out.println(&quot;Date1 æ—¶é—´ä¸ Date2 ç›¸ç­‰&quot;);
  } else {
    System.out.println(&quot;ç¨‹åºæ€ä¹ˆä¼šè¿è¡Œåˆ°è¿™é‡Œ?æ­£å¸¸åº”è¯¥ä¸ä¼š&quot;);
  }
}
</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<pre><code>date1 : 2009-12-31
date2 : 2019-01-31
Date1 æ—¶é—´åœ¨ Date2 ä¹‹å‰
</code></pre>
<p>2. Date.beforeï¼ˆï¼‰ï¼ŒDate.afterï¼ˆï¼‰å’Œ Date.equalsï¼ˆï¼‰</p>
<p>ä¸€ç§è¯­ä¹‰ä¸Šæ¯”è¾ƒå‹å¥½çš„æ–¹æ³•æ¥æ¯”è¾ƒä¸¤ä¸ª<code>java.util.Date</code></p>
<pre><code>@Test
void testDateCompare2() throws ParseException {
  SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);
  Date date1 = sdf.parse(&quot;2009-12-31&quot;);
  Date date2 = sdf.parse(&quot;2019-01-31&quot;);

  System.out.println(&quot;date1 : &quot; + sdf.format(date1));
  System.out.println(&quot;date2 : &quot; + sdf.format(date2));

  if (date1.after(date2)) {
    System.out.println(&quot;Date1 æ—¶é—´åœ¨ Date2 ä¹‹å&quot;);
  }

  if (date1.before(date2)) {
    System.out.println(&quot;Date1 æ—¶é—´åœ¨ Date2 ä¹‹å‰&quot;);
  }

  if (date1.equals(date2)) {
    System.out.println(&quot;Date1 æ—¶é—´ä¸ Date2 ç›¸ç­‰&quot;);
  }
}
</code></pre>
<p>è¾“å‡ºç»“æœ</p>
<pre><code>date1 : 2009-12-31
date2 : 2019-01-31
Date1 æ—¶é—´åœ¨ Date2 ä¹‹å‰
</code></pre>
<p>3. Calender.beforeï¼ˆï¼‰ï¼ŒCalender.afterï¼ˆï¼‰å’Œ Calender.equalsï¼ˆï¼‰</p>
<p>ä½¿ç”¨<code>java.util.Calendar</code>æ¯”è¾ƒä¸¤ä¸ª Date æ—¥æœŸ</p>
<pre><code>@Test
void testDateCompare3() throws ParseException {
  SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);
  Date date1 = sdf.parse(&quot;2009-12-31&quot;);
  Date date2 = sdf.parse(&quot;2019-01-31&quot;);

  System.out.println(&quot;date1 : &quot; + sdf.format(date1));
  System.out.println(&quot;date2 : &quot; + sdf.format(date2));

  Calendar cal1 = Calendar.getInstance();
  Calendar cal2 = Calendar.getInstance();
  cal1.setTime(date1);
  cal2.setTime(date2);

  if (cal1.after(cal2)) {
    System.out.println(&quot;Date1 æ—¶é—´åœ¨ Date2 ä¹‹å&quot;);
  }

  if (cal1.before(cal2)) {
    System.out.println(&quot;Date1 æ—¶é—´åœ¨ Date2 ä¹‹å‰&quot;);
  }

  if (cal1.equals(cal2)) {
    System.out.println(&quot;Date1 æ—¶é—´ä¸ Date2 ç›¸ç­‰&quot;);
  }
}
</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<pre><code>date1 : 2009-12-31
date2 : 2019-01-31
Date1 æ—¶é—´åœ¨ Date2 ä¹‹å‰
</code></pre>
<p>4. Java 8 æ—¥æœŸæ¯”è¾ƒæ–¹æ³•</p>
<p>åœ¨ Java 8 ä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ–°çš„ isBeforeï¼ˆï¼‰ï¼ŒisAfterï¼ˆï¼‰ï¼ŒisEqualï¼ˆï¼‰å’Œ compareToï¼ˆï¼‰æ¥æ¯”è¾ƒ LocalDateï¼ŒLocalTime å’Œ LocalDateTimeã€‚ä»¥ä¸‹ç¤ºä¾‹ä»¥æ¯”è¾ƒä¸¤ä¸ª<code>java.time.LocalDate</code></p>
<pre><code>@Test
void testDateCompare4() throws ParseException {
  DateTimeFormatter sdf = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;);
  LocalDate date1 = LocalDate.of(2009, 12, 31);
  LocalDate date2 = LocalDate.of(2019, 1, 31);

  System.out.println(&quot;date1 : &quot; + sdf.format(date1));
  System.out.println(&quot;date2 : &quot; + sdf.format(date2));

  System.out.println(&quot;Is...&quot;);
  if (date1.isAfter(date2)) {
    System.out.println(&quot;Date1 æ—¶é—´åœ¨ Date2 ä¹‹å&quot;);
  }

  if (date1.isBefore(date2)) {
    System.out.println(&quot;Date1 æ—¶é—´åœ¨ Date2 ä¹‹å‰&quot;);
  }

  if (date1.isEqual(date2)) {
    System.out.println(&quot;Date1 æ—¶é—´ä¸ Date2 ç›¸ç­‰&quot;);
  }
}
</code></pre>
<p>è¾“å‡ºç»“æœ</p>
<pre><code>date1 : 2009-12-31
date2 : 2019-01-31
Is...
Date1 æ—¶é—´åœ¨ Date2 ä¹‹å‰
</code></pre>
<p>æœ¬æ–‡åœ°å€ï¼šhttps://c.lanmit.com/bianchengkaifa/Java/59964.html</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Sqlçª—å£å‡½æ•°--æ’åé—®é¢˜]]></title>
        <id>https://Eakamm.github.io/post/sql-chuang-kou-han-shu-pai-ming-wen-ti/</id>
        <link href="https://Eakamm.github.io/post/sql-chuang-kou-han-shu-pai-ming-wen-ti/">
        </link>
        <updated>2020-10-19T01:02:00.000Z</updated>
        <content type="html"><![CDATA[<pre><code class="language-mysql">select *,
   rank() over (order by æˆç»© desc) as ranking,
   dense_rank() over (order by æˆç»© desc) as dese_rank,
   row_number() over (order by æˆç»© desc) as row_num
from ç­çº§
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[SpringBootä¸Quartzæ•´åˆ]]></title>
        <id>https://Eakamm.github.io/post/springboot-yu-quartz-zheng-he/</id>
        <link href="https://Eakamm.github.io/post/springboot-yu-quartz-zheng-he/">
        </link>
        <updated>2020-10-09T08:16:59.000Z</updated>
        <summary type="html"><![CDATA[<p>Quartz æ˜¯ä¸€ä¸ªå¾ˆç‰›çš„ä»»åŠ¡è°ƒåº¦æ¡†æ¶ï¼Œé€šè¿‡å®ƒæˆ‘ä»¬å¯ä»¥å®ç°è¯¸å¦‚: å®šæ—¶æ´»åŠ¨ã€å»¶æ—¶æ´»åŠ¨ã€è®¢å•çŠ¶æ€å»¶æ—¶æ£€æµ‹ã€æœåŠ¡å™¨çŠ¶æ€å®šæ—¶æ£€æµ‹ç­‰ï¼Œæ—¶é—´è°ƒåº¦ä»»åŠ¡åŠŸèƒ½ã€‚è®°å½•ä¸€ä¸‹ä¸SpringBootæ•´åˆçš„è¿‡ç¨‹ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>Quartz æ˜¯ä¸€ä¸ªå¾ˆç‰›çš„ä»»åŠ¡è°ƒåº¦æ¡†æ¶ï¼Œé€šè¿‡å®ƒæˆ‘ä»¬å¯ä»¥å®ç°è¯¸å¦‚: å®šæ—¶æ´»åŠ¨ã€å»¶æ—¶æ´»åŠ¨ã€è®¢å•çŠ¶æ€å»¶æ—¶æ£€æµ‹ã€æœåŠ¡å™¨çŠ¶æ€å®šæ—¶æ£€æµ‹ç­‰ï¼Œæ—¶é—´è°ƒåº¦ä»»åŠ¡åŠŸèƒ½ã€‚è®°å½•ä¸€ä¸‹ä¸SpringBootæ•´åˆçš„è¿‡ç¨‹ã€‚</p>
<!-- more -->
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Quartzä½œä¸šè°ƒåº¦]]></title>
        <id>https://Eakamm.github.io/post/quartz-zuo-ye-diao-du/</id>
        <link href="https://Eakamm.github.io/post/quartz-zuo-ye-diao-du/">
        </link>
        <updated>2020-10-09T00:49:44.000Z</updated>
        <summary type="html"><![CDATA[<p>Quartzæ˜¯ä¸€ä¸ªå¾ˆç‰›çš„ä»»åŠ¡è°ƒåº¦æ¡†æ¶ï¼Œé€šè¿‡å®ƒæˆ‘ä»¬å¯ä»¥å®ç°è¯¸å¦‚:å®šæ—¶æ´»åŠ¨ã€å»¶æ—¶æ´»åŠ¨ã€è®¢å•çŠ¶æ€å»¶æ—¶æ£€æµ‹ã€æœåŠ¡å™¨çŠ¶æ€å®šæ—¶æ£€æµ‹ç­‰ï¼Œæ—¶é—´è°ƒåº¦ä»»åŠ¡åŠŸèƒ½ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>Quartzæ˜¯ä¸€ä¸ªå¾ˆç‰›çš„ä»»åŠ¡è°ƒåº¦æ¡†æ¶ï¼Œé€šè¿‡å®ƒæˆ‘ä»¬å¯ä»¥å®ç°è¯¸å¦‚:å®šæ—¶æ´»åŠ¨ã€å»¶æ—¶æ´»åŠ¨ã€è®¢å•çŠ¶æ€å»¶æ—¶æ£€æµ‹ã€æœåŠ¡å™¨çŠ¶æ€å®šæ—¶æ£€æµ‹ç­‰ï¼Œæ—¶é—´è°ƒåº¦ä»»åŠ¡åŠŸèƒ½ã€‚</p>
<!-- more -->
<h2 id="ä¸€-ä»€ä¹ˆæ˜¯-quartz">ä¸€ã€ä»€ä¹ˆæ˜¯ Quartz</h2>
<p>ä»€ä¹ˆæ˜¯ Quartz?</p>
<blockquote>
<p>Quartz æ˜¯ OpenSymphony å¼€æºç»„ç»‡åœ¨ Job scheduling é¢†åŸŸåˆä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå®Œå…¨ç”± Java å¼€å‘ï¼Œå¯ä»¥ç”¨æ¥æ‰§è¡Œå®šæ—¶ä»»åŠ¡ï¼Œç±»ä¼¼äº java.util.Timerã€‚ä½†æ˜¯ç›¸è¾ƒäº Timerï¼Œ Quartz å¢åŠ äº†å¾ˆå¤šåŠŸèƒ½ï¼š</p>
<ul>
<li>æŒä¹…æ€§ä½œä¸š - å°±æ˜¯ä¿æŒè°ƒåº¦å®šæ—¶çš„çŠ¶æ€;</li>
<li>ä½œä¸šç®¡ç† - å¯¹è°ƒåº¦ä½œä¸šè¿›è¡Œæœ‰æ•ˆçš„ç®¡ç†;</li>
</ul>
</blockquote>
<p>å¤§éƒ¨åˆ†å…¬å¸éƒ½ä¼šç”¨åˆ°å®šæ—¶ä»»åŠ¡è¿™ä¸ªåŠŸèƒ½ã€‚<br>
æ‹¿ç«è½¦ç¥¨è´­ç¥¨æ¥è¯´ï¼Œå½“ä½ ä¸‹å•åï¼Œåå°å°±ä¼šæ’å…¥ä¸€æ¡å¾…æ”¯ä»˜çš„ task(job)ï¼Œä¸€èˆ¬æ˜¯ 30 åˆ†é’Ÿï¼Œè¶…è¿‡ 30min åå°±ä¼šæ‰§è¡Œè¿™ä¸ª jobï¼Œå»åˆ¤æ–­ä½ æ˜¯å¦æ”¯ä»˜ï¼Œæœªæ”¯ä»˜å°±ä¼šå–æ¶ˆæ­¤æ¬¡è®¢å•ï¼›å½“ä½ æ”¯ä»˜å®Œæˆä¹‹åï¼Œåå°æ‹¿åˆ°æ”¯ä»˜å›è°ƒåå°±ä¼šå†æ’å…¥ä¸€æ¡å¾…æ¶ˆè´¹çš„ taskï¼ˆjobï¼‰ï¼ŒJob è§¦å‘æ—¥æœŸä¸ºç«è½¦ç¥¨ä¸Šçš„å‡ºå‘æ—¥æœŸï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´å°±ä¼šæ‰§è¡Œè¿™ä¸ª jobï¼Œåˆ¤æ–­æ˜¯å¦ä½¿ç”¨ç­‰ã€‚</p>
<p>åœ¨æˆ‘ä»¬å®é™…çš„é¡¹ç›®ä¸­ï¼Œå½“ Job è¿‡å¤šçš„æ—¶å€™ï¼Œè‚¯å®šä¸èƒ½äººå·¥å»æ“ä½œï¼Œè¿™æ—¶å€™å°±éœ€è¦ä¸€ä¸ªä»»åŠ¡è°ƒåº¦æ¡†æ¶ï¼Œå¸®æˆ‘ä»¬è‡ªåŠ¨å»æ‰§è¡Œè¿™äº›ç¨‹åºã€‚é‚£ä¹ˆè¯¥å¦‚ä½•å®ç°è¿™ä¸ªåŠŸèƒ½å‘¢ï¼Ÿ</p>
<p>ï¼ˆ1ï¼‰é¦–å…ˆæˆ‘ä»¬éœ€è¦å®šä¹‰å®ç°ä¸€ä¸ªå®šæ—¶åŠŸèƒ½çš„æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥ç§°ä¹‹ä¸º Taskï¼ˆæˆ– Jobï¼‰ï¼Œå¦‚å®šæ—¶å‘é€é‚®ä»¶çš„ taskï¼ˆJobï¼‰ï¼Œé‡å¯æœºå™¨çš„ taskï¼ˆJobï¼‰ï¼Œä¼˜æƒ åˆ¸åˆ°æœŸå‘é€çŸ­ä¿¡æé†’çš„ taskï¼ˆJobï¼‰ï¼Œå®ç°æ¥å£å¦‚ä¸‹ï¼š<br>
<img src="https://img-blog.csdn.net/20180710135410275?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L25vYW1hbl93Z3M=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="" loading="lazy"></p>
<p>ï¼ˆ2ï¼‰æœ‰äº†ä»»åŠ¡ä¹‹åï¼Œè¿˜éœ€è¦ä¸€ä¸ªèƒ½å¤Ÿå®ç°è§¦å‘ä»»åŠ¡å»æ‰§è¡Œçš„è§¦å‘å™¨ï¼Œè§¦å‘å™¨ Trigger æœ€åŸºæœ¬çš„åŠŸèƒ½æ˜¯æŒ‡å®š Job çš„æ‰§è¡Œæ—¶é—´ï¼Œæ‰§è¡Œé—´éš”ï¼Œè¿è¡Œæ¬¡æ•°ç­‰ã€‚<br>
<img src="https://img-blog.csdn.net/20180710135421739?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L25vYW1hbl93Z3M=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="" loading="lazy"></p>
<p>ï¼ˆ3ï¼‰æœ‰äº† Job å’Œ Trigger åï¼Œæ€ä¹ˆæ ·å°†ä¸¤è€…ç»“åˆèµ·æ¥å‘¢ï¼Ÿå³æ€æ ·æŒ‡å®š Trigger å»æ‰§è¡ŒæŒ‡å®šçš„ Job å‘¢ï¼Ÿè¿™æ—¶éœ€è¦ä¸€ä¸ª Scheduleï¼Œæ¥è´Ÿè´£è¿™ä¸ªåŠŸèƒ½çš„å®ç°ã€‚<br>
<img src="https://img-blog.csdn.net/20180710135431806?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L25vYW1hbl93Z3M=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="" loading="lazy"></p>
<p>ä¸Šé¢ä¸‰ä¸ªéƒ¨åˆ†å°±æ˜¯ Quartz çš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ï¼š</p>
<ul>
<li>è°ƒåº¦å™¨ï¼šScheduler</li>
<li>ä»»åŠ¡ï¼šJobDetail</li>
<li>è§¦å‘å™¨ï¼šTriggerï¼ŒåŒ…æ‹¬ SimpleTrigger å’Œ CronTrigger</li>
</ul>
<h2 id="äºŒ-quartz-demo-æ­å»º">äºŒã€Quartz Demo æ­å»º</h2>
<p>ä¸‹é¢æ¥åˆ©ç”¨ Quartz æ­å»ºä¸€ä¸ªæœ€åŸºæœ¬çš„ Demoã€‚<br>
1ã€å¯¼å…¥ä¾èµ–çš„ jar åŒ…ï¼š</p>
<pre><code class="language-xml">&lt;!-- https://mvnrepository.com/artifact/org.quartz-scheduler/quartz --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.quartz-scheduler&lt;/groupId&gt;
    &lt;artifactId&gt;quartz&lt;/artifactId&gt;
    &lt;version&gt;2.3.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>2ã€æ–°å»ºä¸€ä¸ªèƒ½å¤Ÿæ‰“å°ä»»æ„å†…å®¹çš„ Jobï¼š</p>
<pre><code class="language-java">/**
 * Created by wanggenshen
 * Date: on 2018/7/7 16:28.
 * Description: æ‰“å°ä»»æ„å†…å®¹
 */
public class PrintWordsJob implements Job{

    @Override
    public void execute(JobExecutionContext jobExecutionContext) throws JobExecutionException {
        String printTime = new SimpleDateFormat(&quot;yy-MM-dd HH-mm-ss&quot;).format(new Date());
        System.out.println(&quot;PrintWordsJob start at:&quot; + printTime + &quot;, prints: Hello Job-&quot; + new Random().nextInt(100));

    }
}
</code></pre>
<p>3ã€åˆ›å»º Scheduleï¼Œæ‰§è¡Œä»»åŠ¡ï¼š</p>
<pre><code class="language-java">/**
 * Created by wanggenshen
 * Date: on 2018/7/7 16:31.
 * Description: XXX
 */
public class MyScheduler {

    public static void main(String\[\] args) throws SchedulerException, InterruptedException {
        // 1ã€åˆ›å»ºè°ƒåº¦å™¨Scheduler
        SchedulerFactory schedulerFactory = new StdSchedulerFactory();
        Scheduler scheduler = schedulerFactory.getScheduler();
        // 2ã€åˆ›å»ºJobDetailå®ä¾‹ï¼Œå¹¶ä¸PrintWordsJobç±»ç»‘å®š(Jobæ‰§è¡Œå†…å®¹)
        JobDetail jobDetail = JobBuilder.newJob(PrintWordsJob.class)
                                        .withIdentity(&quot;job1&quot;, &quot;group1&quot;).build();
        // 3ã€æ„å»ºTriggerå®ä¾‹,æ¯éš”1sæ‰§è¡Œä¸€æ¬¡
        Trigger trigger = TriggerBuilder.newTrigger().withIdentity(&quot;trigger1&quot;, &quot;triggerGroup1&quot;)
                .startNow()//ç«‹å³ç”Ÿæ•ˆ
                .withSchedule(SimpleScheduleBuilder.simpleSchedule()
                .withIntervalInSeconds(1)//æ¯éš”1sæ‰§è¡Œä¸€æ¬¡
                .repeatForever()).build();//ä¸€ç›´æ‰§è¡Œ

        //4ã€æ‰§è¡Œ
        scheduler.scheduleJob(jobDetail, trigger);
        System.out.println(&quot;--------scheduler start ! ------------&quot;);
        scheduler.start();

        //ç¡çœ 
        TimeUnit.MINUTES.sleep(1);
        scheduler.shutdown();
        System.out.println(&quot;--------scheduler shutdown ! ------------&quot;);


    }
}
</code></pre>
<p>è¿è¡Œç¨‹åºï¼Œå¯ä»¥çœ‹åˆ°ç¨‹åºæ¯éš” 1s ä¼šæ‰“å°å‡ºå†…å®¹ï¼Œä¸”åœ¨ä¸€åˆ†é’Ÿåç»“æŸï¼š<br>
<img src="https://img-blog.csdn.net/20180710135458277?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L25vYW1hbl93Z3M=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="" loading="lazy"></p>
<h2 id="ä¸‰-quartz-æ ¸å¿ƒè¯¦è§£">ä¸‰ã€Quartz æ ¸å¿ƒè¯¦è§£</h2>
<p>ä¸‹é¢å°±ç¨‹åºä¸­å‡ºç°çš„å‡ ä¸ªå‚æ•°ï¼Œçœ‹ä¸€ä¸‹ Quartz æ¡†æ¶ä¸­çš„å‡ ä¸ªé‡è¦å‚æ•°ï¼š</p>
<ul>
<li>Job å’Œ JobDetail</li>
<li>JobExecutionContext</li>
<li>JobDataMap</li>
<li>Triggerã€SimpleTriggerã€CronTrigger</li>
</ul>
<p>ï¼ˆ1ï¼‰Job å’Œ JobDetail<br>
Job æ˜¯ Quartz ä¸­çš„ä¸€ä¸ªæ¥å£ï¼Œæ¥å£ä¸‹åªæœ‰ execute æ–¹æ³•ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­ç¼–å†™ä¸šåŠ¡é€»è¾‘ã€‚<br>
æ¥å£ä¸­çš„æºç ï¼š<br>
<img src="https://img-blog.csdn.net/20180710135513678?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L25vYW1hbl93Z3M=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="" loading="lazy"></p>
<p>JobDetail ç”¨æ¥ç»‘å®š Jobï¼Œä¸º Job å®ä¾‹æä¾›è®¸å¤šå±æ€§ï¼š</p>
<ul>
<li>name</li>
<li>group</li>
<li>jobClass</li>
<li>jobDataMap</li>
</ul>
<p>JobDetail ç»‘å®šæŒ‡å®šçš„ Jobï¼Œæ¯æ¬¡ Scheduler è°ƒåº¦æ‰§è¡Œä¸€ä¸ª Job çš„æ—¶å€™ï¼Œé¦–å…ˆä¼šæ‹¿åˆ°å¯¹åº”çš„ Jobï¼Œç„¶ååˆ›å»ºè¯¥ Job å®ä¾‹ï¼Œå†å»æ‰§è¡Œ Job ä¸­çš„ execute() çš„å†…å®¹ï¼Œä»»åŠ¡æ‰§è¡Œç»“æŸåï¼Œå…³è”çš„ Job å¯¹è±¡å®ä¾‹ä¼šè¢«é‡Šæ”¾ï¼Œä¸”ä¼šè¢« JVM GC æ¸…é™¤ã€‚</p>
<p>ä¸ºä»€ä¹ˆè®¾è®¡æˆ JobDetail + Jobï¼Œä¸ç›´æ¥ä½¿ç”¨ Job</p>
<blockquote>
<p>JobDetail å®šä¹‰çš„æ˜¯ä»»åŠ¡æ•°æ®ï¼Œè€ŒçœŸæ­£çš„æ‰§è¡Œé€»è¾‘æ˜¯åœ¨ Job ä¸­ã€‚<br>
è¿™æ˜¯å› ä¸ºä»»åŠ¡æ˜¯æœ‰å¯èƒ½å¹¶å‘æ‰§è¡Œï¼Œå¦‚æœ Scheduler ç›´æ¥ä½¿ç”¨ Jobï¼Œå°±ä¼šå­˜åœ¨å¯¹åŒä¸€ä¸ª Job å®ä¾‹å¹¶å‘è®¿é—®çš„é—®é¢˜ã€‚è€Œ JobDetail &amp; Job æ–¹å¼ï¼ŒSheduler æ¯æ¬¡æ‰§è¡Œï¼Œéƒ½ä¼šæ ¹æ® JobDetail åˆ›å»ºä¸€ä¸ªæ–°çš„ Job å®ä¾‹ï¼Œè¿™æ ·å°±å¯ä»¥è§„é¿å¹¶å‘è®¿é—®çš„é—®é¢˜ã€‚</p>
</blockquote>
<p>ï¼ˆ2ï¼‰JobExecutionContext<br>
JobExecutionContext ä¸­åŒ…å«äº† Quartz è¿è¡Œæ—¶çš„ç¯å¢ƒä»¥åŠ Job æœ¬èº«çš„è¯¦ç»†æ•°æ®ä¿¡æ¯ã€‚<br>
å½“ Schedule è°ƒåº¦æ‰§è¡Œä¸€ä¸ª Job çš„æ—¶å€™ï¼Œå°±ä¼šå°† JobExecutionContext ä¼ é€’ç»™è¯¥ Job çš„ execute() ä¸­ï¼ŒJob å°±å¯ä»¥é€šè¿‡ JobExecutionContext å¯¹è±¡è·å–ä¿¡æ¯ã€‚<br>
ä¸»è¦ä¿¡æ¯æœ‰ï¼š<br>
<img src="https://img-blog.csdn.net/20180710135537517?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L25vYW1hbl93Z3M=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="" loading="lazy"></p>
<p>ï¼ˆ3ï¼‰JobExecutionContext<br>
JobDataMap å®ç°äº† JDK çš„ Map æ¥å£ï¼Œå¯ä»¥ä»¥ Key-Value çš„å½¢å¼å­˜å‚¨æ•°æ®ã€‚<br>
JobDetailã€Trigger éƒ½å¯ä»¥ä½¿ç”¨ JobDataMap æ¥è®¾ç½®ä¸€äº›å‚æ•°æˆ–ä¿¡æ¯ï¼Œ<br>
Job æ‰§è¡Œ execute() æ–¹æ³•çš„æ—¶å€™ï¼ŒJobExecutionContext å¯ä»¥è·å–åˆ° JobExecutionContext ä¸­çš„ä¿¡æ¯ï¼š<br>
å¦‚ï¼š</p>
<pre><code class="language-java">JobDetail jobDetail = JobBuilder.newJob(PrintWordsJob.class)                        .usingJobData(&quot;jobDetail1&quot;, &quot;è¿™ä¸ªJobç”¨æ¥æµ‹è¯•çš„&quot;)
                  .withIdentity(&quot;job1&quot;, &quot;group1&quot;).build();

 Trigger trigger = TriggerBuilder.newTrigger().withIdentity(&quot;trigger1&quot;, &quot;triggerGroup1&quot;)
      .usingJobData(&quot;trigger1&quot;, &quot;è¿™æ˜¯jobDetail1çš„trigger&quot;)
      .startNow()//ç«‹å³ç”Ÿæ•ˆ
      .withSchedule(SimpleScheduleBuilder.simpleSchedule()
      .withIntervalInSeconds(1)//æ¯éš”1sæ‰§è¡Œä¸€æ¬¡
      .repeatForever()).build();//ä¸€ç›´æ‰§è¡Œ
</code></pre>
<p>Job æ‰§è¡Œçš„æ—¶å€™ï¼Œå¯ä»¥è·å–åˆ°è¿™äº›å‚æ•°ä¿¡æ¯ï¼š</p>
<pre><code class="language-java">@Override
    public void execute(JobExecutionContext jobExecutionContext) throws JobExecutionException {

        System.out.println(jobExecutionContext.getJobDetail().getJobDataMap().get(&quot;jobDetail1&quot;));
        System.out.println(jobExecutionContext.getTrigger().getJobDataMap().get(&quot;trigger1&quot;));
        String printTime = new SimpleDateFormat(&quot;yy-MM-dd HH-mm-ss&quot;).format(new Date());
        System.out.println(&quot;PrintWordsJob start at:&quot; + printTime + &quot;, prints: Hello Job-&quot; + new Random().nextInt(100));


    }
</code></pre>
<p>ï¼ˆ4ï¼‰Triggerã€SimpleTriggerã€CronTrigger</p>
<ul>
<li><strong>Trigger</strong></li>
</ul>
<p>Trigger æ˜¯ Quartz çš„è§¦å‘å™¨ï¼Œä¼šå»é€šçŸ¥ Scheduler ä½•æ—¶å»æ‰§è¡Œå¯¹åº” Jobã€‚</p>
<pre><code>new Trigger().startAt():è¡¨ç¤ºè§¦å‘å™¨é¦–æ¬¡è¢«è§¦å‘çš„æ—¶é—´;
new Trigger().endAt():è¡¨ç¤ºè§¦å‘å™¨ç»“æŸè§¦å‘çš„æ—¶é—´;
</code></pre>
<ul>
<li><strong>SimpleTrigger</strong><br>
SimpleTrigger å¯ä»¥å®ç°åœ¨ä¸€ä¸ªæŒ‡å®šæ—¶é—´æ®µå†…æ‰§è¡Œä¸€æ¬¡ä½œä¸šä»»åŠ¡æˆ–ä¸€ä¸ªæ—¶é—´æ®µå†…å¤šæ¬¡æ‰§è¡Œä½œä¸šä»»åŠ¡ã€‚<br>
ä¸‹é¢çš„ç¨‹åºå°±å®ç°äº†ç¨‹åºè¿è¡Œ 5s åå¼€å§‹æ‰§è¡Œ Jobï¼Œæ‰§è¡Œ Job 5s åç»“æŸæ‰§è¡Œï¼š</li>
</ul>
<pre><code>Date startDate = new Date();
startDate.setTime(startDate.getTime() + 5000);

 Date endDate = new Date();
 endDate.setTime(startDate.getTime() + 5000);

        Trigger trigger = TriggerBuilder.newTrigger().withIdentity(&quot;trigger1&quot;, &quot;triggerGroup1&quot;)
                .usingJobData(&quot;trigger1&quot;, &quot;è¿™æ˜¯jobDetail1çš„trigger&quot;)
                .startNow()//ç«‹å³ç”Ÿæ•ˆ
                .startAt(startDate)
                .endAt(endDate)
                .withSchedule(SimpleScheduleBuilder.simpleSchedule()
                .withIntervalInSeconds(1)//æ¯éš”1sæ‰§è¡Œä¸€æ¬¡
                .repeatForever()).build();//ä¸€ç›´æ‰§è¡Œ
</code></pre>
<ul>
<li><strong>CronTrigger</strong></li>
</ul>
<p>CronTrigger åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œæ˜¯åŸºäºæ—¥å†çš„ä½œä¸šè°ƒåº¦ï¼Œè€Œ SimpleTrigger æ˜¯ç²¾å‡†æŒ‡å®šé—´éš”ï¼Œæ‰€ä»¥ç›¸æ¯” SimpleTriggerï¼ŒCroTrigger æ›´åŠ å¸¸ç”¨ã€‚CroTrigger æ˜¯åŸºäº Cron è¡¨è¾¾å¼çš„ï¼Œå…ˆäº†è§£ä¸‹ Cron è¡¨è¾¾å¼ï¼š<br>
ç”± 7 ä¸ªå­è¡¨è¾¾å¼ç»„æˆå­—ç¬¦ä¸²çš„ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>[ç§’] [åˆ†] [å°æ—¶] [æ—¥] [æœˆ] [å‘¨] [å¹´]</p>
</blockquote>
<p>Cron è¡¨è¾¾å¼çš„è¯­æ³•æ¯”è¾ƒå¤æ‚ï¼Œ<br>
å¦‚ï¼š* 30 10 ? * 1/5 *<br>
è¡¨ç¤ºï¼ˆä»åå¾€å‰çœ‹ï¼‰<br>
[æŒ‡å®šå¹´ä»½] çš„ [ å‘¨ä¸€åˆ°å‘¨äº”][æŒ‡å®šæœˆ][ä¸æŒ‡å®šæ—¥][ä¸Šåˆ 10 æ—¶][30 åˆ†][æŒ‡å®šç§’]</p>
<p>åˆå¦‚ï¼š00 00 00 ï¼Ÿ * 10,11,12 1#5 2018<br>
è¡¨ç¤º 2018 å¹´ 10ã€11ã€12 æœˆçš„ç¬¬ä¸€å‘¨çš„æ˜ŸæœŸäº”è¿™ä¸€å¤©çš„ 0 æ—¶ 0 åˆ† 0 ç§’å»æ‰§è¡Œä»»åŠ¡ã€‚</p>
<p>ä¸‹é¢æ˜¯ç»™çš„ä¸€ä¸ªä¾‹å­ï¼š<br>
<img src="https://img-blog.csdn.net/20180710135615747?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L25vYW1hbl93Z3M=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="" loading="lazy"></p>
<p>å¯é€šè¿‡åœ¨çº¿ç”Ÿæˆ Cron è¡¨è¾¾å¼çš„å·¥å…·ï¼š<a href="http://cron.qqe2.com/">http://cron.qqe2.com/</a> æ¥ç”Ÿæˆè‡ªå·±æƒ³è¦çš„è¡¨è¾¾å¼ã€‚<br>
<img src="https://img-blog.csdn.net/20180710135623995?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L25vYW1hbl93Z3M=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="" loading="lazy"></p>
<p>ä¸‹é¢çš„ä»£ç å°±å®ç°äº†æ¯å‘¨ä¸€åˆ°å‘¨äº”ä¸Šåˆ 10:30 æ‰§è¡Œå®šæ—¶ä»»åŠ¡</p>
<pre><code class="language-java">/**
 * Created by wanggenshen
 * Date: on 2018/7/7 20:06.
 * Description: XXX
*/
public class MyScheduler2 {
    public static void main(String\[\] args) throws SchedulerException, InterruptedException {
        // 1ã€åˆ›å»ºè°ƒåº¦å™¨Scheduler
        SchedulerFactory schedulerFactory = new StdSchedulerFactory();
        Scheduler scheduler = schedulerFactory.getScheduler();
        // 2ã€åˆ›å»ºJobDetailå®ä¾‹ï¼Œå¹¶ä¸PrintWordsJobç±»ç»‘å®š(Jobæ‰§è¡Œå†…å®¹)
        JobDetail jobDetail = JobBuilder.newJob(PrintWordsJob.class)
                .usingJobData(&quot;jobDetail1&quot;, &quot;è¿™ä¸ªJobç”¨æ¥æµ‹è¯•çš„&quot;)
                .withIdentity(&quot;job1&quot;, &quot;group1&quot;).build();
        // 3ã€æ„å»ºTriggerå®ä¾‹,æ¯éš”1sæ‰§è¡Œä¸€æ¬¡
        Date startDate = new Date();
        startDate.setTime(startDate.getTime() + 5000);

        Date endDate = new Date();
        endDate.setTime(startDate.getTime() + 5000);

        CronTrigger cronTrigger = TriggerBuilder.newTrigger().withIdentity(&quot;trigger1&quot;, &quot;triggerGroup1&quot;)
                .usingJobData(&quot;trigger1&quot;, &quot;è¿™æ˜¯jobDetail1çš„trigger&quot;)
                .startNow()//ç«‹å³ç”Ÿæ•ˆ
                .startAt(startDate)
                .endAt(endDate)
                .withSchedule(CronScheduleBuilder.cronSchedule(&quot;\* 30 10 ? \* 1/5 2018&quot;))
                .build();

        //4ã€æ‰§è¡Œ
        scheduler.scheduleJob(jobDetail, cronTrigger);
        System.out.println(&quot;--------scheduler start ! ------------&quot;);
        scheduler.start();
        System.out.println(&quot;--------scheduler shutdown ! ------------&quot;);

    }
}
</code></pre>
<hr>
<p>2018/07/07 20:10 in SH.</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[SpringBootä½¿ç”¨GetMappingæ—¶å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå¯¹è±¡çš„å±æ€§ä¸å¯ä»¥_å¼€å¤´]]></title>
        <id>https://Eakamm.github.io/post/springboot-shi-yong-getmapping-shi-dui-xiang-zuo-wei-can-shu-dui-xiang-de-shu-xing-bu-ke-yi-_-kai-tou/</id>
        <link href="https://Eakamm.github.io/post/springboot-shi-yong-getmapping-shi-dui-xiang-zuo-wei-can-shu-dui-xiang-de-shu-xing-bu-ke-yi-_-kai-tou/">
        </link>
        <updated>2020-09-28T03:35:16.000Z</updated>
        <summary type="html"><![CDATA[<p>SpringBootä½¿ç”¨GetMappingæ—¶ä»¥å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå¯¹è±¡çš„å±æ€§ä¸å¯ä»¥_å¼€å¤´ï¼Œåœ¨ç½‘ä¸Šä¹Ÿæ²¡æœ‰æ‰¾åˆ°è§£é‡Šã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>SpringBootä½¿ç”¨GetMappingæ—¶ä»¥å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå¯¹è±¡çš„å±æ€§ä¸å¯ä»¥_å¼€å¤´ï¼Œåœ¨ç½‘ä¸Šä¹Ÿæ²¡æœ‰æ‰¾åˆ°è§£é‡Šã€‚</p>
<!-- more -->
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[jsä¸­è·³å‡ºforEachå¾ªç¯]]></title>
        <id>https://Eakamm.github.io/post/js-zhong-tiao-chu-foreach-xun-huan/</id>
        <link href="https://Eakamm.github.io/post/js-zhong-tiao-chu-foreach-xun-huan/">
        </link>
        <updated>2020-09-27T07:08:57.000Z</updated>
        <summary type="html"><![CDATA[<p>åœ¨ä½¿ç”¨forEachä¸­éœ€è¦åœ¨å¤„ç†åè·³å‡ºå¾ªç¯ï¼Œreturnå’Œbreakéƒ½æ— æ³•è·³å‡ºã€‚ç»è¿‡æŸ¥æ‰¾èµ„æ–™åï¼Œæˆ‘æ‰¾åˆ°äº†ä¸¤ç§æ–¹æ³•å¯ä»¥å®ç°è·³å‡ºå¾ªç¯ã€‚å½“ç„¶å¯ä»¥ä½¿ç”¨forå¾ªç¯ç›´æ¥è§£å†³ğŸŒ¸ğŸ”</p>
]]></summary>
        <content type="html"><![CDATA[<p>åœ¨ä½¿ç”¨forEachä¸­éœ€è¦åœ¨å¤„ç†åè·³å‡ºå¾ªç¯ï¼Œreturnå’Œbreakéƒ½æ— æ³•è·³å‡ºã€‚ç»è¿‡æŸ¥æ‰¾èµ„æ–™åï¼Œæˆ‘æ‰¾åˆ°äº†ä¸¤ç§æ–¹æ³•å¯ä»¥å®ç°è·³å‡ºå¾ªç¯ã€‚å½“ç„¶å¯ä»¥ä½¿ç”¨forå¾ªç¯ç›´æ¥è§£å†³ğŸŒ¸ğŸ”</p>
<!-- more -->
<h2 id="1-ä½¿ç”¨trycatchæ•è·å¼‚å¸¸å®ç°">1ã€ä½¿ç”¨tryÂ·Â·Â·catchæ•è·å¼‚å¸¸å®ç°</h2>
<pre><code class="language-javascript">try{
var array = [&quot;first&quot;,&quot;second&quot;,&quot;third&quot;,&quot;fourth&quot;];
array.forEach(function(item,index){
	if(item == &quot;third&quot;){
		var a = aaaa;// first second åå°±æŠ¥é”™ï¼Œå°±è·³å‡ºå¾ªç¯äº†
		throw new Error(&quot;ending&quot;);//æŠ¥é”™ï¼Œå°±è·³å‡ºå¾ªç¯
	}else{
		log(item);
	}
})
}catch(e){
	if(e.message == &quot;ending&quot;){
		log(&quot;ç»“æŸäº†&quot;) ;
	}else{
		log(e.message);
	}
}
</code></pre>
<h2 id="2-ä½¿ç”¨arrsomeæˆ–è€…arreveryæ›¿ä»£">2ã€ä½¿ç”¨arr.some()æˆ–è€…arr.every()æ›¿ä»£</h2>
<p>some()å½“å†…éƒ¨return trueæ—¶è·³å‡ºæ•´ä¸ªå¾ªç¯ã€‚<br>
some() æ–¹æ³•æµ‹è¯•æ˜¯å¦è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ é€šè¿‡ç”±æä¾›çš„å‡½æ•°å®ç°çš„æµ‹è¯•ã€‚</p>
<pre><code class="language-javascript">var arr = [1,2,3,4,5];
var num = 3;
arr.some(function(v){
	if(v == num) {
        // è¿”å›trueä»£è¡¨æµ‹è¯•é€šè¿‡ï¼Œç»“æŸå¾ªç¯
		return true;
	}
console.log(v);
});
</code></pre>
<p>every()å½“å†…éƒ¨return falseæ—¶è·³å‡ºæ•´ä¸ªå¾ªç¯<br>
every() æ–¹æ³•æµ‹è¯•æ•°ç»„çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½é€šè¿‡äº†æŒ‡å®šå‡½æ•°çš„æµ‹è¯•ã€‚</p>
<pre><code class="language-javascript">var arr = [1,2,3,4,5];
var num = 3;
arr.every(function(v){
	if(v == num) {
		return false;
	}else{
		console.log(v);
		return true;
	}
});
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[PandasåŸºç¡€ï¼ˆä¸€ï¼‰]]></title>
        <id>https://Eakamm.github.io/post/pandas-ji-chu-yi/</id>
        <link href="https://Eakamm.github.io/post/pandas-ji-chu-yi/">
        </link>
        <updated>2020-09-25T06:47:37.000Z</updated>
        <summary type="html"><![CDATA[<p>Pandasæ˜¯ä¸€ä¸ªå¼ºå¤§çš„åˆ†æç»“æ„åŒ–æ•°æ®çš„å·¥å…·é›†ï¼›å®ƒçš„ä½¿ç”¨åŸºç¡€æ˜¯Numpyï¼ˆæä¾›é«˜æ€§èƒ½çš„çŸ©é˜µè¿ç®—ï¼‰ï¼›ç”¨äºæ•°æ®æŒ–æ˜å’Œæ•°æ®åˆ†æï¼ŒåŒæ—¶ä¹Ÿæä¾›æ•°æ®æ¸…æ´—åŠŸèƒ½ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>Pandasæ˜¯ä¸€ä¸ªå¼ºå¤§çš„åˆ†æç»“æ„åŒ–æ•°æ®çš„å·¥å…·é›†ï¼›å®ƒçš„ä½¿ç”¨åŸºç¡€æ˜¯Numpyï¼ˆæä¾›é«˜æ€§èƒ½çš„çŸ©é˜µè¿ç®—ï¼‰ï¼›ç”¨äºæ•°æ®æŒ–æ˜å’Œæ•°æ®åˆ†æï¼ŒåŒæ—¶ä¹Ÿæä¾›æ•°æ®æ¸…æ´—åŠŸèƒ½ã€‚</p>
<!-- more -->
<h2 id="1-servies">1ã€Servies</h2>
<p>pandasåˆ›å»ºä¸€ä¸ªä¸€ç»´æ•°ç»„</p>
<pre><code class="language-python{cmd}">import pandas as pd
import numpy as np

s = pd.Series(['a', 'b', 'c'], index=[1, 2, 3])

# è·å–ç´¢å¼•åºåˆ—
print(s.index)

# æ ¹æ®ç´¢å¼•æŸ¥æ‰¾æ•°æ®
print(s[1])
s[1] = &quot;e&quot;
print(s[1])

print('----------------------------------')
# å¤šä¸ªç´¢å¼•æˆ–å€¼æŸ¥æ‰¾
s2 = pd.Series([1, 2, 6], index=['a', 'b', 'c'])
# è‡ªå®šä¹‰çš„ç´¢å¼•('a', 'b', 'c')
print(s2[['a', 'b']])
# ç¬¬nè¡Œ(0,1,2)
print(s2[[1, 2]])
# å€¼å°äºç­‰äºn
print(s2[s2 &lt;= 3])

print('----------------------------------')
# inåˆ¤æ–­ç´¢å¼•æ˜¯å¦å­˜åœ¨
print(1 in s)

</code></pre>
<p>é€šè¿‡<code>.index</code>æ”¹å˜ç´¢å¼•</p>
<pre><code class="language-python"># Seriesçš„ç´¢å¼•å¯ä»¥é€šè¿‡æŒ‰ä½ç½®èµ‹å€¼çš„æ–¹å¼è¿›è¡Œæ”¹å˜
s.index = ['a','b','c']
</code></pre>
<p>Pythonåˆ‡ç‰‡ä¸­æ˜¯ä¸åŒ…å«å°¾éƒ¨çš„ï¼ŒSeriesçš„è‡ªå®šä¹‰å­—ç¬¦ä¸²ç´¢å¼•çš„åˆ‡ç‰‡ä¸ä¹‹ä¸åŒ.</p>
<pre><code class="language-python">import pandas as pd
import numpy as np

# å­—ç¬¦ä¸²ç´¢å¼•
s = pd.Series([1,2,3], index=['a', 'b', 'c'])
# æ•°å­—ç´¢å¼•
s1 = pd.Series([1,2,3], index=[1, 2, 3])
s2 = [1,2,3]
print(s2[0:1])
# æ ¹æ®è¡Œæ•°åšåˆ‡ç‰‡ä¸æ™®é€šæ•°ç»„çš„åˆ‡ç‰‡ç›¸åŒ
print(s1[1:2])
# è‡ªå®šä¹‰å­—ç¬¦ä¸²ç´¢å¼•åŒ…å«å°¾éƒ¨
print(s['a':'b'])

# å¯ä»¥ä½¿ç”¨åˆ‡ç‰‡æ›´æ”¹æ•°æ®
s['a':'b'] = 4
print(s)
</code></pre>
<h2 id="2-dataframe">2ã€DataFrame</h2>
<h3 id="21-åˆ›å»º">2.1ã€åˆ›å»º</h3>
<p>æœ€å¸¸ç”¨çš„æ–¹å¼æ˜¯åˆ©ç”¨åŒ…å«ç­‰é•¿åº¦åˆ—è¡¨æˆ–NumPyæ•°ç»„çš„å­—å…¸æ¥å½¢æˆDataFrame(æŸä¸€åˆ—æ²¡æœ‰èµ‹å€¼ï¼Œä¼šå‡ºç°ç¼ºçœå€¼NaN)</p>
<pre><code class="language-python">import pandas as pd

data = {'state': ['Ohio', 'Ohio', 'Ohio', 'Nevada', 'Nevada', 'Nevada'],
        'year': [2000, 2001, 2002, 2001, 2002, 2003],
        'pop': [1.5, 1.7, 3.6, 2.4, 2.9, 3.2]}
frame = pd.DataFrame(data)

print(frame)
</code></pre>
<p>è®¾ç½®åˆ—åä¸è¡Œåï¼Œ<code>debt</code>åˆ—ä¸ºç©ºï¼Œä¸ºNaN</p>
<pre><code class="language-python">&gt;&gt;&gt; frame2 = pd.DataFrame(data, columns=['year', 'state', 'pop', 'debt'],
...                       index=['one', 'two', 'three', 'four',
...                              'five', 'six'])
&gt;&gt;&gt; frame2
one    2000    Ohio  1.5  NaN
two    2001    Ohio  1.7  NaN
three  2002    Ohio  3.6  NaN
four   2001  Nevada  2.4  NaN
five   2002  Nevada  2.9  NaN
six    2003  Nevada  3.2  NaN
</code></pre>
<h3 id="22-æŸ¥æ‰¾">2.2ã€æŸ¥æ‰¾</h3>
<p><code>loc[]</code>è·å–æŸä¸€è¡Œçš„æ•°æ®</p>
<pre><code class="language-python">import pandas as pd

data = {'state': ['Ohio', 'Ohio', 'Ohio', 'Nevada', 'Nevada', 'Nevada'],
        'year': [2000, 2001, 2002, 2001, 2002, 2003],
        'pop': [1.5, 1.7, 3.6, 2.4, 2.9, 3.2]}
frame = pd.DataFrame(data)

# æŸ¥æ‰¾æŸä¸€è¡Œ
print(frame)
print(frame.loc[1])

# å¤šä¸ªç´¢å¼•æŸ¥æ‰¾


# åˆ›å»ºæ–°çš„ä¸€åˆ—
frame['test'] = frame.state == 'Ohio'
print(frame)
# åˆ é™¤ä¸€åˆ—
del frame['test']
print(frame.columns)
</code></pre>
<h3 id="23-æ ¹æ®å¸ƒå°”å€¼åˆ‡ç‰‡">2.3ã€æ ¹æ®å¸ƒå°”å€¼åˆ‡ç‰‡</h3>
<p>å¯ä»¥æ ¹æ®ä¸€ä¸ªå¸ƒå°”å€¼æ•°ç»„é€‰æ‹©æ•°æ®ï¼Œä¹Ÿå¯ä»¥æ¯”è¾ƒæ‰€æœ‰çš„å…ƒç´ ï¼Œå¯¹ç¬¦åˆè¦æ±‚çš„å…ƒç´ æ‰§è¡Œæ“ä½œã€‚</p>
<pre><code class="language-python{cmd}">import pandas as pd
import numpy as np
frame = pd.DataFrame(np.arange(20).reshape(4, 5),
                      index=list('abcd'),
                      columns=list('abcde'))
# frame &lt; 5
print(frame &lt; 5)
# å°†å°äº5çš„å…ƒç´ æ”¹ä¸º0
frame[frame &lt; 5] = 0
print(frame)
# æ ¹æ®åˆ—çš„æ¯”è¾ƒç»“æœæ˜¾ç¤ºæ•°æ®
print(frame[frame['b'] &gt; 10])

print(frame)
</code></pre>
<h3 id="24-locä¸ilocç´¢å¼•">2.4ã€locä¸ilocç´¢å¼•</h3>
<p>æ ‡ç­¾é€‰å‡ºå•è¡Œå¤šåˆ—çš„æ•°æ®å¯ä»¥ä½¿ç”¨<code>loc</code>ï¼ˆä¹Ÿå°±æ˜¯è‡ªå®šä¹‰çš„ç´¢å¼•ï¼‰</p>
<pre><code class="language-python">import numpy as np
import pandas as pd

frame = pd.DataFrame(np.arange(20).reshape(4, 5),
                      index=list('abcd'),
                      columns=list('abcde'))
# è·å–æŸä¸€è¡Œ
print(frame.loc['a'])
# è·å–æŸä¸€è¡Œçš„nåˆ—æ•°æ®
print(frame.loc['a',['a', 'b']])
# 
print(frame.loc[['a','b'],['a', 'b']])
</code></pre>
<p>æ•´æ•°æ ‡ç­¾<code>iloc</code>è¿›è¡Œç±»ä¼¼çš„æ•°æ®é€‰æ‹©</p>
<pre><code class="language-python">import numpy as np
import pandas as pd

frame = pd.DataFrame(np.arange(20).reshape(4, 5),
                      index=list('abcd'),
                      columns=list('abcde'))
print(frame.iloc[1])

print(frame.iloc[1,[1,2]])

print(frame.iloc[[1,2],[1,2]])
</code></pre>
<h3 id="25-æ•´æ•°ç´¢å¼•é—®é¢˜">2.5ã€æ•´æ•°ç´¢å¼•é—®é¢˜</h3>
<pre><code class="language-python">import numpy as np
import pandas as pd


</code></pre>
<p>å½“ä½¿ç”¨å­—ç¬¦ä¸²çš„ç´¢å¼•å°±ä¸ä¼šå¯¹s[-1]äº§ç”Ÿæ­§ä¹‰</p>
<p>æ‰€ä»¥ä½ æœ‰ä¸€ä¸ªåŒ…å«æ•´æ•°çš„è½´ç´¢å¼•ï¼Œæ•°æ®é€‰æ‹©æ—¶è¯·å§‹ç»ˆä½¿ç”¨æ ‡ç­¾ç´¢å¼•ã€‚</p>
<h3 id="26-å¹¿æ’­æœºåˆ¶">2.6ã€å¹¿æ’­æœºåˆ¶</h3>
<h3 id="27-å‡½æ•°">2.7ã€å‡½æ•°</h3>
<p>ä½¿ç”¨<code>apply</code>å¯ä»¥å–å‡ºæ¯ä¸€è¡Œæˆ–æ¯ä¸€åˆ—çš„å…ƒç´ ã€‚<code>axis = 'columns'</code>å–å‡ºæ¯ä¸€è¡Œï¼Œä»¥è¡Œä¸ºç´¢å¼•ã€‚é»˜è®¤ä¸ºåˆ—ã€‚<br>
å¯ä»¥ä½¿ç”¨å‡½æ•°å¯¹æ•°æ®è¿›è¡Œæ›´å¤æ‚çš„æ“ä½œ</p>
<pre><code class="language-python">import numpy as np
import pandas as pd

df = pd.DataFrame(np.arange(20).reshape(4, 5),
                  columns=list('abcde'))

# æ±‚æ¯ç»„æ•°æ®çš„æœ€å¤§æœ€å°å€¼çš„å·®


def f(x): return x.max()-x.min()


# é»˜è®¤ä¸ºå–å‡ºæ¯åˆ—
series = df.apply(f)
print(series)

# å–å‡ºæ¯è¡Œ
series = df.apply(f, axis=&quot;columns&quot;)
print(series)
</code></pre>
<p>ä½¿ç”¨<code>applymap</code>å–å‡ºæ¯ä¸ªå…ƒç´ </p>
<pre><code class="language-python">import numpy as np
import pandas as pd

df = pd.DataFrame(np.arange(20).reshape(4, 5),
                  columns=list('abcde'))
# å¤„ç†æ‰€æœ‰çš„å…ƒç´ 
# æ±‚å¹³æ–¹
def f2(x): return x**2


data_frame = df.applymap(f2)
print(data_frame)

# å¤„ç†æŸä¸€è¡Œ
data_frame = df.loc[1].map(f2)
print(data_frame)
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å¸¸ç”¨æ•°å­—æ­£åˆ™è¡¨è¾¾å¼]]></title>
        <id>https://Eakamm.github.io/post/chang-yong-shu-zi-zheng-ze-biao-da-shi/</id>
        <link href="https://Eakamm.github.io/post/chang-yong-shu-zi-zheng-ze-biao-da-shi/">
        </link>
        <updated>2020-09-11T08:43:37.000Z</updated>
        <content type="html"><![CDATA[<p>éªŒè¯æ•°å­—çš„æ­£åˆ™è¡¨è¾¾å¼é›†</p>
<table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>æ­£åˆ™è¡¨è¾¾å¼</th>
<th>éƒ¨åˆ†éªŒè¯çš„æ ¼å¼</th>
</tr>
</thead>
<tbody>
<tr>
<td>éªŒè¯æ•°å­—</td>
<td><sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>*$</td>
<td></td>
</tr>
<tr>
<td>éªŒè¯nä½çš„æ•°å­—</td>
<td>^\d{n}$</td>
<td></td>
</tr>
<tr>
<td>éªŒè¯è‡³å°‘nä½æ•°å­—</td>
<td>^\d{n,}$</td>
<td></td>
</tr>
<tr>
<td>éªŒè¯m-nä½çš„æ•°å­—</td>
<td>^\d{m,n}$</td>
<td></td>
</tr>
<tr>
<td>éªŒè¯é›¶å’Œéé›¶å¼€å¤´çš„æ•°å­—</td>
<td>^(0</td>
<td>[1-9][0-9]*)$</td>
</tr>
<tr>
<td>éªŒè¯æœ‰ä¸¤ä½å°æ•°çš„æ­£å®æ•°</td>
<td><sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>+(.[0-9]{2})?$</td>
<td></td>
</tr>
<tr>
<td>éªŒè¯æœ‰1-3ä½å°æ•°çš„æ­£å®æ•°</td>
<td><sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup>+(.[0-9]{1,3})?$</td>
<td></td>
</tr>
<tr>
<td>éªŒè¯éé›¶çš„æ­£æ•´æ•°</td>
<td>^+?[1-9][0-9]*$</td>
<td></td>
</tr>
<tr>
<td>éªŒè¯éé›¶çš„è´Ÿæ•´æ•°</td>
<td>^-[1-9][0-9]*$</td>
<td></td>
</tr>
<tr>
<td>éªŒè¯éè´Ÿæ•´æ•°ï¼ˆæ­£æ•´æ•° + 0ï¼‰</td>
<td>^\d+$</td>
<td></td>
</tr>
<tr>
<td>éªŒè¯éæ­£æ•´æ•°ï¼ˆè´Ÿæ•´æ•° + 0ï¼‰</td>
<td>^((-\d+)</td>
<td>(0+))$</td>
</tr>
<tr>
<td>éªŒè¯é•¿åº¦ä¸º3çš„å­—ç¬¦</td>
<td>^.{3}$</td>
<td></td>
</tr>
<tr>
<td>éªŒè¯ç”±26ä¸ªè‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²</td>
<td><sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup>+$</td>
<td></td>
</tr>
<tr>
<td>éªŒè¯ç”±26ä¸ªå¤§å†™è‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²</td>
<td><sup class="footnote-ref"><a href="#fn5" id="fnref5">[5]</a></sup>+$</td>
<td></td>
</tr>
<tr>
<td>éªŒè¯ç”±26ä¸ªå°å†™è‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²</td>
<td><sup class="footnote-ref"><a href="#fn6" id="fnref6">[6]</a></sup>+$</td>
<td></td>
</tr>
<tr>
<td>éªŒè¯ç”±æ•°å­—å’Œ26ä¸ªè‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²</td>
<td><sup class="footnote-ref"><a href="#fn7" id="fnref7">[7]</a></sup>+$</td>
<td></td>
</tr>
<tr>
<td>éªŒè¯ç”±æ•°å­—ã€26ä¸ªè‹±æ–‡å­—æ¯æˆ–è€…ä¸‹åˆ’çº¿ç»„æˆçš„å­—ç¬¦ä¸²</td>
<td>^\w+$</td>
<td></td>
</tr>
<tr>
<td>éªŒè¯ç”¨æˆ·å¯†ç </td>
<td><sup class="footnote-ref"><a href="#fn8" id="fnref8">[8]</a></sup>\w{5,17}$</td>
<td>æ­£ç¡®æ ¼å¼ä¸ºï¼šä»¥å­—æ¯å¼€å¤´ï¼Œé•¿åº¦åœ¨6-18ä¹‹é—´ï¼Œåªèƒ½åŒ…å«å­—ç¬¦ã€æ•°å­—å’Œä¸‹åˆ’çº¿ã€‚</td>
</tr>
<tr>
<td>éªŒè¯æ˜¯å¦å«æœ‰ ^%&amp;',;=?$&quot; ç­‰å­—ç¬¦</td>
<td>[^%&amp;',;=?$\x22]+</td>
<td></td>
</tr>
<tr>
<td>éªŒè¯æ±‰å­—</td>
<td><sup class="footnote-ref"><a href="#fn9" id="fnref9">[9]</a></sup>,{0,}$</td>
<td></td>
</tr>
<tr>
<td>éªŒè¯Emailåœ°å€</td>
<td>/^([a-zA-Z0-9]+[_</td>
<td>_</td>
</tr>
<tr>
<td>éªŒè¯InternetURL</td>
<td>^http://([\w-]+.)+[\w-]+(/[\w-./?%&amp;=]<em>)?$ ï¼›<sup class="footnote-ref"><a href="#fn10" id="fnref10">[10]</a></sup>+://(w+(-w+)</em>)(.(w+(-w+)<em>))</em>(?S*)?$</td>
<td></td>
</tr>
<tr>
<td>éªŒè¯ç”µè¯å·ç </td>
<td>^(\d3,4\d3,4</td>
<td>\d{3,4}-)?\d{7,8}$</td>
</tr>
<tr>
<td>éªŒè¯èº«ä»½è¯å·ï¼ˆ15ä½æˆ–18ä½æ•°å­—ï¼‰</td>
<td>^\d{15}</td>
<td>\d{}18$</td>
</tr>
<tr>
<td>éªŒè¯ä¸€å¹´çš„12ä¸ªæœˆ</td>
<td>^(0?[1-9]</td>
<td>1[0-2])$</td>
</tr>
<tr>
<td>éªŒè¯ä¸€ä¸ªæœˆçš„31å¤©</td>
<td>^((0?[1-9])</td>
<td>((1</td>
</tr>
<tr>
<td>æ•´æ•°</td>
<td>^-?\d+$</td>
<td></td>
</tr>
<tr>
<td>éè´Ÿæµ®ç‚¹æ•°ï¼ˆæ­£æµ®ç‚¹æ•° + 0ï¼‰</td>
<td>^\d+(.\d+)?$</td>
<td></td>
</tr>
<tr>
<td>æ­£æµ®ç‚¹æ•°</td>
<td>^(([0-9]+.[0-9]<em>[1-9][0-9]</em>)</td>
<td>([0-9]<em>[1-9][0-9]</em>.[0-9]+)</td>
</tr>
<tr>
<td>éæ­£æµ®ç‚¹æ•°</td>
<td>ï¼ˆè´Ÿæµ®ç‚¹æ•° + 0ï¼‰ ^((-\d+(.\d+)?)</td>
<td>(0+(.0+)?))$</td>
</tr>
<tr>
<td>è´Ÿæµ®ç‚¹æ•°</td>
<td>^(-(([0-9]+.[0-9]<em>[1-9][0-9]</em>)</td>
<td>([0-9]<em>[1-9][0-9]</em>.[0-9]+)</td>
</tr>
<tr>
<td>æµ®ç‚¹æ•°</td>
<td>^(-?\d+)(.\d+)?$</td>
<td></td>
</tr>
</tbody>
</table>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>0-9 <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p>
</li>
<li id="fn2" class="footnote-item"><p>0-9 <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p>
</li>
<li id="fn3" class="footnote-item"><p>0-9 <a href="#fnref3" class="footnote-backref">â†©ï¸</a></p>
</li>
<li id="fn4" class="footnote-item"><p>A-Za-z <a href="#fnref4" class="footnote-backref">â†©ï¸</a></p>
</li>
<li id="fn5" class="footnote-item"><p>A-Z <a href="#fnref5" class="footnote-backref">â†©ï¸</a></p>
</li>
<li id="fn6" class="footnote-item"><p>a-z <a href="#fnref6" class="footnote-backref">â†©ï¸</a></p>
</li>
<li id="fn7" class="footnote-item"><p>A-Za-z0-9 <a href="#fnref7" class="footnote-backref">â†©ï¸</a></p>
</li>
<li id="fn8" class="footnote-item"><p>a-zA-Z <a href="#fnref8" class="footnote-backref">â†©ï¸</a></p>
</li>
<li id="fn9" class="footnote-item"><p>\u4e00-\u9fa5 <a href="#fnref9" class="footnote-backref">â†©ï¸</a></p>
</li>
<li id="fn10" class="footnote-item"><p>a-zA-z <a href="#fnref10" class="footnote-backref">â†©ï¸</a></p>
</li>
</ol>
</section>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[JWT]]></title>
        <id>https://Eakamm.github.io/post/jwt/</id>
        <link href="https://Eakamm.github.io/post/jwt/">
        </link>
        <updated>2020-09-08T09:15:57.000Z</updated>
        <summary type="html"><![CDATA[<blockquote>
<p>Json web token (JWT), æ˜¯ä¸ºäº†åœ¨ç½‘ç»œåº”ç”¨ç¯å¢ƒé—´ä¼ é€’å£°æ˜è€Œæ‰§è¡Œçš„ä¸€ç§åŸºäº JSON çš„å¼€æ”¾æ ‡å‡†ï¼ˆ<a href="https://link.jianshu.com/?t=https://tools.ietf.org/html/rfc7519">(RFC 7519</a>). è¯¥ token è¢«è®¾è®¡ä¸ºç´§å‡‘ä¸”å®‰å…¨çš„ï¼Œç‰¹åˆ«é€‚ç”¨äºåˆ†å¸ƒå¼ç«™ç‚¹çš„å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰åœºæ™¯ã€‚JWT çš„å£°æ˜ä¸€èˆ¬è¢«ç”¨æ¥åœ¨èº«ä»½æä¾›è€…å’ŒæœåŠ¡æä¾›è€…é—´ä¼ é€’è¢«è®¤è¯çš„ç”¨æˆ·èº«ä»½ä¿¡æ¯ï¼Œä»¥ä¾¿äºä»èµ„æºæœåŠ¡å™¨è·å–èµ„æºï¼Œä¹Ÿå¯ä»¥å¢åŠ ä¸€äº›é¢å¤–çš„å…¶å®ƒä¸šåŠ¡é€»è¾‘æ‰€å¿…é¡»çš„å£°æ˜ä¿¡æ¯ï¼Œè¯¥ token ä¹Ÿå¯ç›´æ¥è¢«ç”¨äºè®¤è¯ï¼Œä¹Ÿå¯è¢«åŠ å¯†ã€‚</p>
</blockquote>
]]></summary>
        <content type="html"><![CDATA[<blockquote>
<p>Json web token (JWT), æ˜¯ä¸ºäº†åœ¨ç½‘ç»œåº”ç”¨ç¯å¢ƒé—´ä¼ é€’å£°æ˜è€Œæ‰§è¡Œçš„ä¸€ç§åŸºäº JSON çš„å¼€æ”¾æ ‡å‡†ï¼ˆ<a href="https://link.jianshu.com/?t=https://tools.ietf.org/html/rfc7519">(RFC 7519</a>). è¯¥ token è¢«è®¾è®¡ä¸ºç´§å‡‘ä¸”å®‰å…¨çš„ï¼Œç‰¹åˆ«é€‚ç”¨äºåˆ†å¸ƒå¼ç«™ç‚¹çš„å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰åœºæ™¯ã€‚JWT çš„å£°æ˜ä¸€èˆ¬è¢«ç”¨æ¥åœ¨èº«ä»½æä¾›è€…å’ŒæœåŠ¡æä¾›è€…é—´ä¼ é€’è¢«è®¤è¯çš„ç”¨æˆ·èº«ä»½ä¿¡æ¯ï¼Œä»¥ä¾¿äºä»èµ„æºæœåŠ¡å™¨è·å–èµ„æºï¼Œä¹Ÿå¯ä»¥å¢åŠ ä¸€äº›é¢å¤–çš„å…¶å®ƒä¸šåŠ¡é€»è¾‘æ‰€å¿…é¡»çš„å£°æ˜ä¿¡æ¯ï¼Œè¯¥ token ä¹Ÿå¯ç›´æ¥è¢«ç”¨äºè®¤è¯ï¼Œä¹Ÿå¯è¢«åŠ å¯†ã€‚</p>
</blockquote>
<!-- more -->
<h2 id="åŸæ–‡åœ°å€-wwwjianshucomhttpswwwjianshucomp576dbf44b2aeèµ·æº">åŸæ–‡åœ°å€ [www.jianshu.com](https://www.jianshu.com/p/576dbf44b2ae)<br>
èµ·æº</h2>
<p>è¯´èµ· JWTï¼Œæˆ‘ä»¬åº”è¯¥æ¥è°ˆä¸€è°ˆåŸºäº token çš„è®¤è¯å’Œä¼ ç»Ÿçš„ session è®¤è¯çš„åŒºåˆ«ã€‚</p>
<h3 id="ä¼ ç»Ÿçš„-session-è®¤è¯">ä¼ ç»Ÿçš„ session è®¤è¯</h3>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œhttp åè®®æœ¬èº«æ˜¯ä¸€ç§æ— çŠ¶æ€çš„åè®®ï¼Œè€Œè¿™å°±æ„å‘³ç€å¦‚æœç”¨æˆ·å‘æˆ‘ä»¬çš„åº”ç”¨æä¾›äº†ç”¨æˆ·åå’Œå¯†ç æ¥è¿›è¡Œç”¨æˆ·è®¤è¯ï¼Œé‚£ä¹ˆä¸‹ä¸€æ¬¡è¯·æ±‚æ—¶ï¼Œç”¨æˆ·è¿˜è¦å†ä¸€æ¬¡è¿›è¡Œç”¨æˆ·è®¤è¯æ‰è¡Œï¼Œå› ä¸ºæ ¹æ® http åè®®ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½çŸ¥é“æ˜¯å“ªä¸ªç”¨æˆ·å‘å‡ºçš„è¯·æ±‚ï¼Œæ‰€ä»¥ä¸ºäº†è®©æˆ‘ä»¬çš„åº”ç”¨èƒ½è¯†åˆ«æ˜¯å“ªä¸ªç”¨æˆ·å‘å‡ºçš„è¯·æ±‚ï¼Œæˆ‘ä»¬åªèƒ½åœ¨æœåŠ¡å™¨å­˜å‚¨ä¸€ä»½ç”¨æˆ·ç™»å½•çš„ä¿¡æ¯ï¼Œè¿™ä»½ç™»å½•ä¿¡æ¯ä¼šåœ¨å“åº”æ—¶ä¼ é€’ç»™æµè§ˆå™¨ï¼Œå‘Šè¯‰å…¶ä¿å­˜ä¸º cookie, ä»¥ä¾¿ä¸‹æ¬¡è¯·æ±‚æ—¶å‘é€ç»™æˆ‘ä»¬çš„åº”ç”¨ï¼Œè¿™æ ·æˆ‘ä»¬çš„åº”ç”¨å°±èƒ½è¯†åˆ«è¯·æ±‚æ¥è‡ªå“ªä¸ªç”¨æˆ·äº†, è¿™å°±æ˜¯ä¼ ç»Ÿçš„åŸºäº session è®¤è¯ã€‚</p>
<p>ä½†æ˜¯è¿™ç§åŸºäº session çš„è®¤è¯ä½¿åº”ç”¨æœ¬èº«å¾ˆéš¾å¾—åˆ°æ‰©å±•ï¼Œéšç€ä¸åŒå®¢æˆ·ç«¯ç”¨æˆ·çš„å¢åŠ ï¼Œç‹¬ç«‹çš„æœåŠ¡å™¨å·²æ— æ³•æ‰¿è½½æ›´å¤šçš„ç”¨æˆ·ï¼Œè€Œè¿™æ—¶å€™åŸºäº session è®¤è¯åº”ç”¨çš„é—®é¢˜å°±ä¼šæš´éœ²å‡ºæ¥.</p>
<h4 id="åŸºäº-session-è®¤è¯æ‰€æ˜¾éœ²çš„é—®é¢˜">åŸºäº session è®¤è¯æ‰€æ˜¾éœ²çš„é—®é¢˜</h4>
<p><strong>Session</strong>: æ¯ä¸ªç”¨æˆ·ç»è¿‡æˆ‘ä»¬çš„åº”ç”¨è®¤è¯ä¹‹åï¼Œæˆ‘ä»¬çš„åº”ç”¨éƒ½è¦åœ¨æœåŠ¡ç«¯åšä¸€æ¬¡è®°å½•ï¼Œä»¥æ–¹ä¾¿ç”¨æˆ·ä¸‹æ¬¡è¯·æ±‚çš„é‰´åˆ«ï¼Œé€šå¸¸è€Œè¨€ session éƒ½æ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè€Œéšç€è®¤è¯ç”¨æˆ·çš„å¢å¤šï¼ŒæœåŠ¡ç«¯çš„å¼€é”€ä¼šæ˜æ˜¾å¢å¤§ã€‚</p>
<p><strong>æ‰©å±•æ€§</strong>: ç”¨æˆ·è®¤è¯ä¹‹åï¼ŒæœåŠ¡ç«¯åšè®¤è¯è®°å½•ï¼Œå¦‚æœè®¤è¯çš„è®°å½•è¢«ä¿å­˜åœ¨å†…å­˜ä¸­çš„è¯ï¼Œè¿™æ„å‘³ç€ç”¨æˆ·ä¸‹æ¬¡è¯·æ±‚è¿˜å¿…é¡»è¦è¯·æ±‚åœ¨è¿™å°æœåŠ¡å™¨ä¸Š, è¿™æ ·æ‰èƒ½æ‹¿åˆ°æˆæƒçš„èµ„æºï¼Œè¿™æ ·åœ¨åˆ†å¸ƒå¼çš„åº”ç”¨ä¸Šï¼Œç›¸åº”çš„é™åˆ¶äº†è´Ÿè½½å‡è¡¡å™¨çš„èƒ½åŠ›ã€‚è¿™ä¹Ÿæ„å‘³ç€é™åˆ¶äº†åº”ç”¨çš„æ‰©å±•èƒ½åŠ›ã€‚</p>
<p><strong>CSRF</strong>: å› ä¸ºæ˜¯åŸºäº cookie æ¥è¿›è¡Œç”¨æˆ·è¯†åˆ«çš„, cookie å¦‚æœè¢«æˆªè·ï¼Œç”¨æˆ·å°±ä¼šå¾ˆå®¹æ˜“å—åˆ°è·¨ç«™è¯·æ±‚ä¼ªé€ çš„æ”»å‡»ã€‚</p>
<h2 id="åŸºäº-token-çš„é‰´æƒæœºåˆ¶">åŸºäº token çš„é‰´æƒæœºåˆ¶</h2>
<p>åŸºäº token çš„é‰´æƒæœºåˆ¶ç±»ä¼¼äº http åè®®ä¹Ÿæ˜¯æ— çŠ¶æ€çš„ï¼Œå®ƒä¸éœ€è¦åœ¨æœåŠ¡ç«¯å»ä¿ç•™ç”¨æˆ·çš„è®¤è¯ä¿¡æ¯æˆ–è€…ä¼šè¯ä¿¡æ¯ã€‚è¿™å°±æ„å‘³ç€åŸºäº token è®¤è¯æœºåˆ¶çš„åº”ç”¨ä¸éœ€è¦å»è€ƒè™‘ç”¨æˆ·åœ¨å“ªä¸€å°æœåŠ¡å™¨ç™»å½•äº†ï¼Œè¿™å°±ä¸ºåº”ç”¨çš„æ‰©å±•æä¾›äº†ä¾¿åˆ©ã€‚</p>
<p>æµç¨‹ä¸Šæ˜¯è¿™æ ·çš„ï¼š</p>
<ul>
<li>ç”¨æˆ·ä½¿ç”¨ç”¨æˆ·åå¯†ç æ¥è¯·æ±‚æœåŠ¡å™¨</li>
<li>æœåŠ¡å™¨è¿›è¡ŒéªŒè¯ç”¨æˆ·çš„ä¿¡æ¯</li>
<li>æœåŠ¡å™¨é€šè¿‡éªŒè¯å‘é€ç»™ç”¨æˆ·ä¸€ä¸ª token</li>
<li>å®¢æˆ·ç«¯å­˜å‚¨ tokenï¼Œå¹¶åœ¨æ¯æ¬¡è¯·æ±‚æ—¶é™„é€ä¸Šè¿™ä¸ª token å€¼</li>
<li>æœåŠ¡ç«¯éªŒè¯ token å€¼ï¼Œå¹¶è¿”å›æ•°æ®</li>
</ul>
<p>è¿™ä¸ª token å¿…é¡»è¦åœ¨æ¯æ¬¡è¯·æ±‚æ—¶ä¼ é€’ç»™æœåŠ¡ç«¯ï¼Œå®ƒåº”è¯¥ä¿å­˜åœ¨è¯·æ±‚å¤´é‡Œï¼Œ å¦å¤–ï¼ŒæœåŠ¡ç«¯è¦æ”¯æŒ<code>CORS(è·¨æ¥æºèµ„æºå…±äº«)</code>ç­–ç•¥ï¼Œä¸€èˆ¬æˆ‘ä»¬åœ¨æœåŠ¡ç«¯è¿™ä¹ˆåšå°±å¯ä»¥äº†<code>Access-Control-Allow-Origin: *</code>ã€‚</p>
<p>é‚£ä¹ˆæˆ‘ä»¬ç°åœ¨å›åˆ° JWT çš„ä¸»é¢˜ä¸Šã€‚</p>
<h2 id="jwt-é•¿ä»€ä¹ˆæ ·">JWT é•¿ä»€ä¹ˆæ ·ï¼Ÿ</h2>
<p>JWT æ˜¯ç”±ä¸‰æ®µä¿¡æ¯æ„æˆçš„ï¼Œå°†è¿™ä¸‰æ®µä¿¡æ¯æ–‡æœ¬ç”¨<code>.</code>é“¾æ¥ä¸€èµ·å°±æ„æˆäº† Jwt å­—ç¬¦ä¸²ã€‚å°±åƒè¿™æ ·:</p>
<pre><code>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ
</code></pre>
<h2 id="jwt-çš„æ„æˆ">JWT çš„æ„æˆ</h2>
<p>ç¬¬ä¸€éƒ¨åˆ†æˆ‘ä»¬ç§°å®ƒä¸ºå¤´éƒ¨ï¼ˆheader), ç¬¬äºŒéƒ¨åˆ†æˆ‘ä»¬ç§°å…¶ä¸ºè½½è·ï¼ˆpayload, ç±»ä¼¼äºé£æœºä¸Šæ‰¿è½½çš„ç‰©å“)ï¼Œç¬¬ä¸‰éƒ¨åˆ†æ˜¯ç­¾è¯ï¼ˆsignature).</p>
<h3 id="header">header</h3>
<p>jwt çš„å¤´éƒ¨æ‰¿è½½ä¸¤éƒ¨åˆ†ä¿¡æ¯ï¼š</p>
<ul>
<li>å£°æ˜ç±»å‹ï¼Œè¿™é‡Œæ˜¯ jwt</li>
<li>å£°æ˜åŠ å¯†çš„ç®—æ³• é€šå¸¸ç›´æ¥ä½¿ç”¨ HMAC SHA256</li>
</ul>
<p>å®Œæ•´çš„å¤´éƒ¨å°±åƒä¸‹é¢è¿™æ ·çš„ JSONï¼š</p>
<pre><code>{
  'typ': 'JWT',
  'alg': 'HS256'
}
</code></pre>
<p>ç„¶åå°†å¤´éƒ¨è¿›è¡Œ base64 åŠ å¯†ï¼ˆè¯¥åŠ å¯†æ˜¯å¯ä»¥å¯¹ç§°è§£å¯†çš„), æ„æˆäº†ç¬¬ä¸€éƒ¨åˆ†.</p>
<pre><code>eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9
</code></pre>
<h3 id="playload">playload</h3>
<p>è½½è·å°±æ˜¯å­˜æ”¾æœ‰æ•ˆä¿¡æ¯çš„åœ°æ–¹ã€‚è¿™ä¸ªåå­—åƒæ˜¯ç‰¹æŒ‡é£æœºä¸Šæ‰¿è½½çš„è´§å“ï¼Œè¿™äº›æœ‰æ•ˆä¿¡æ¯åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†</p>
<ul>
<li>æ ‡å‡†ä¸­æ³¨å†Œçš„å£°æ˜</li>
<li>å…¬å…±çš„å£°æ˜</li>
<li>ç§æœ‰çš„å£°æ˜</li>
</ul>
<p><strong>æ ‡å‡†ä¸­æ³¨å†Œçš„å£°æ˜</strong> (å»ºè®®ä½†ä¸å¼ºåˆ¶ä½¿ç”¨) ï¼š</p>
<ul>
<li><strong>iss</strong>: jwt ç­¾å‘è€…</li>
<li><strong>sub</strong>: jwt æ‰€é¢å‘çš„ç”¨æˆ·</li>
<li><strong>aud</strong>: æ¥æ”¶ jwt çš„ä¸€æ–¹</li>
<li><strong>exp</strong>: jwt çš„è¿‡æœŸæ—¶é—´ï¼Œè¿™ä¸ªè¿‡æœŸæ—¶é—´å¿…é¡»è¦å¤§äºç­¾å‘æ—¶é—´</li>
<li><strong>nbf</strong>: å®šä¹‰åœ¨ä»€ä¹ˆæ—¶é—´ä¹‹å‰ï¼Œè¯¥ jwt éƒ½æ˜¯ä¸å¯ç”¨çš„.</li>
<li><strong>iat</strong>: jwt çš„ç­¾å‘æ—¶é—´</li>
<li><strong>jti</strong>: jwt çš„å”¯ä¸€èº«ä»½æ ‡è¯†ï¼Œä¸»è¦ç”¨æ¥ä½œä¸ºä¸€æ¬¡æ€§ token, ä»è€Œå›é¿é‡æ”¾æ”»å‡»ã€‚</li>
</ul>
<p><strong>å…¬å…±çš„å£°æ˜</strong> ï¼š<br>
å…¬å…±çš„å£°æ˜å¯ä»¥æ·»åŠ ä»»ä½•çš„ä¿¡æ¯ï¼Œä¸€èˆ¬æ·»åŠ ç”¨æˆ·çš„ç›¸å…³ä¿¡æ¯æˆ–å…¶ä»–ä¸šåŠ¡éœ€è¦çš„å¿…è¦ä¿¡æ¯. ä½†ä¸å»ºè®®æ·»åŠ æ•æ„Ÿä¿¡æ¯ï¼Œå› ä¸ºè¯¥éƒ¨åˆ†åœ¨å®¢æˆ·ç«¯å¯è§£å¯†.</p>
<p><strong>ç§æœ‰çš„å£°æ˜</strong> ï¼š<br>
ç§æœ‰å£°æ˜æ˜¯æä¾›è€…å’Œæ¶ˆè´¹è€…æ‰€å…±åŒå®šä¹‰çš„å£°æ˜ï¼Œä¸€èˆ¬ä¸å»ºè®®å­˜æ”¾æ•æ„Ÿä¿¡æ¯ï¼Œå› ä¸º base64 æ˜¯å¯¹ç§°è§£å¯†çš„ï¼Œæ„å‘³ç€è¯¥éƒ¨åˆ†ä¿¡æ¯å¯ä»¥å½’ç±»ä¸ºæ˜æ–‡ä¿¡æ¯ã€‚</p>
<p>å®šä¹‰ä¸€ä¸ª payload:</p>
<pre><code>{
  &quot;sub&quot;: &quot;1234567890&quot;,
  &quot;name&quot;: &quot;John Doe&quot;,
  &quot;admin&quot;: true
}
</code></pre>
<p>ç„¶åå°†å…¶è¿›è¡Œ base64 åŠ å¯†ï¼Œå¾—åˆ° Jwt çš„ç¬¬äºŒéƒ¨åˆ†ã€‚</p>
<pre><code>eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9
</code></pre>
<h3 id="signature">signature</h3>
<p>jwt çš„ç¬¬ä¸‰éƒ¨åˆ†æ˜¯ä¸€ä¸ªç­¾è¯ä¿¡æ¯ï¼Œè¿™ä¸ªç­¾è¯ä¿¡æ¯ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š</p>
<ul>
<li>header (base64 åçš„)</li>
<li>payload (base64 åçš„)</li>
<li>secret</li>
</ul>
<p>è¿™ä¸ªéƒ¨åˆ†éœ€è¦ base64 åŠ å¯†åçš„ header å’Œ base64 åŠ å¯†åçš„ payload ä½¿ç”¨<code>.</code>è¿æ¥ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œç„¶åé€šè¿‡ header ä¸­å£°æ˜çš„åŠ å¯†æ–¹å¼è¿›è¡ŒåŠ ç›<code>secret</code>ç»„åˆåŠ å¯†ï¼Œç„¶åå°±æ„æˆäº† jwt çš„ç¬¬ä¸‰éƒ¨åˆ†ã€‚</p>
<pre><code>// javascript
var encodedString = base64UrlEncode(header) + '.' + base64UrlEncode(payload);

var signature = HMACSHA256(encodedString, 'secret'); // TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ
</code></pre>
<p>å°†è¿™ä¸‰éƒ¨åˆ†ç”¨<code>.</code>è¿æ¥æˆä¸€ä¸ªå®Œæ•´çš„å­—ç¬¦ä¸², æ„æˆäº†æœ€ç»ˆçš„ jwt:</p>
<pre><code>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ
</code></pre>
<p><strong>æ³¨æ„ï¼šsecret æ˜¯ä¿å­˜åœ¨æœåŠ¡å™¨ç«¯çš„ï¼Œjwt çš„ç­¾å‘ç”Ÿæˆä¹Ÿæ˜¯åœ¨æœåŠ¡å™¨ç«¯çš„ï¼Œsecret å°±æ˜¯ç”¨æ¥è¿›è¡Œ jwt çš„ç­¾å‘å’Œ jwt çš„éªŒè¯ï¼Œæ‰€ä»¥ï¼Œå®ƒå°±æ˜¯ä½ æœåŠ¡ç«¯çš„ç§é’¥ï¼Œåœ¨ä»»ä½•åœºæ™¯éƒ½ä¸åº”è¯¥æµéœ²å‡ºå»ã€‚ä¸€æ—¦å®¢æˆ·ç«¯å¾—çŸ¥è¿™ä¸ª secret, é‚£å°±æ„å‘³ç€å®¢æˆ·ç«¯æ˜¯å¯ä»¥è‡ªæˆ‘ç­¾å‘ jwt äº†ã€‚</strong></p>
<h3 id="å¦‚ä½•åº”ç”¨">å¦‚ä½•åº”ç”¨</h3>
<p>ä¸€èˆ¬æ˜¯åœ¨è¯·æ±‚å¤´é‡ŒåŠ å…¥<code>Authorization</code>ï¼Œå¹¶åŠ ä¸Š<code>Bearer</code>æ ‡æ³¨ï¼š</p>
<pre><code>fetch('api/user/1', {
  headers: {
    'Authorization': 'Bearer ' + token
  }
})
</code></pre>
<p>æœåŠ¡ç«¯ä¼šéªŒè¯ tokenï¼Œå¦‚æœéªŒè¯é€šè¿‡å°±ä¼šè¿”å›ç›¸åº”çš„èµ„æºã€‚æ•´ä¸ªæµç¨‹å°±æ˜¯è¿™æ ·çš„:</p>
<figure data-type="image" tabindex="1"><img src="http://upload-images.jianshu.io/upload_images/1821058-2e28fe6c997a60c9.png" alt="" loading="lazy"></figure>
<p>jwt-diagram</p>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<h3 id="ä¼˜ç‚¹">ä¼˜ç‚¹</h3>
<ul>
<li>å› ä¸º json çš„é€šç”¨æ€§ï¼Œæ‰€ä»¥ JWT æ˜¯å¯ä»¥è¿›è¡Œè·¨è¯­è¨€æ”¯æŒçš„ï¼Œåƒ JAVA,JavaScript,NodeJS,PHP ç­‰å¾ˆå¤šè¯­è¨€éƒ½å¯ä»¥ä½¿ç”¨ã€‚</li>
<li>å› ä¸ºæœ‰äº† payload éƒ¨åˆ†ï¼Œæ‰€ä»¥ JWT å¯ä»¥åœ¨è‡ªèº«å­˜å‚¨ä¸€äº›å…¶ä»–ä¸šåŠ¡é€»è¾‘æ‰€å¿…è¦çš„éæ•æ„Ÿä¿¡æ¯ã€‚</li>
<li>ä¾¿äºä¼ è¾“ï¼Œjwt çš„æ„æˆéå¸¸ç®€å•ï¼Œå­—èŠ‚å ç”¨å¾ˆå°ï¼Œæ‰€ä»¥å®ƒæ˜¯éå¸¸ä¾¿äºä¼ è¾“çš„ã€‚</li>
<li>å®ƒä¸éœ€è¦åœ¨æœåŠ¡ç«¯ä¿å­˜ä¼šè¯ä¿¡æ¯, æ‰€ä»¥å®ƒæ˜“äºåº”ç”¨çš„æ‰©å±•</li>
</ul>
<h3 id="å®‰å…¨ç›¸å…³">å®‰å…¨ç›¸å…³</h3>
<ul>
<li>ä¸åº”è¯¥åœ¨ jwt çš„ payload éƒ¨åˆ†å­˜æ”¾æ•æ„Ÿä¿¡æ¯ï¼Œå› ä¸ºè¯¥éƒ¨åˆ†æ˜¯å®¢æˆ·ç«¯å¯è§£å¯†çš„éƒ¨åˆ†ã€‚</li>
<li>ä¿æŠ¤å¥½ secret ç§é’¥ï¼Œè¯¥ç§é’¥éå¸¸é‡è¦ã€‚</li>
<li>å¦‚æœå¯ä»¥ï¼Œè¯·ä½¿ç”¨ https åè®®</li>
</ul>
<figure data-type="image" tabindex="2"><a href="https://www.jianshu.com/u/d286ee5ad51e"><img src="https://upload.jianshu.io/users/upload_avatars/1821058/f2a247ca2423?imageMogr2/auto-orient/strip%7CimageView2/1/w/100/h/100/format/webp" alt="" loading="lazy"></a></figure>
<p><a href="https://www.jianshu.com/u/d286ee5ad51e" title="Dearmadman">Dearmadman</a>Beautiful work by passionate people.</p>
<p>æ€»èµ„äº§ 17 (çº¦ 1.56 å…ƒ) å…±å†™äº† 11.1W å­—è·å¾— 1,289 ä¸ªèµå…± 932 ä¸ªç²‰ä¸</p>
<h3 id="è¢«ä»¥ä¸‹ä¸“é¢˜æ”¶å…¥å‘ç°æ›´å¤šç›¸ä¼¼å†…å®¹">è¢«ä»¥ä¸‹ä¸“é¢˜æ”¶å…¥ï¼Œå‘ç°æ›´å¤šç›¸ä¼¼å†…å®¹</h3>
<h3 id="æ¨èé˜…è¯»æ›´å¤šç²¾å½©å†…å®¹">æ¨èé˜…è¯»<a href="https://www.jianshu.com/">æ›´å¤šç²¾å½©å†…å®¹</a></h3>
<ul>
<li>
<p>1. å¾®æœåŠ¡æ¶æ„ä»‹ç» 1.1 ä»€ä¹ˆæ˜¯å¾®æœåŠ¡æ¶æ„ï¼Ÿ å½¢åƒä¸€ç‚¹æ¥è¯´ï¼Œå¾®æœåŠ¡æ¶æ„å°±åƒæ­ç§¯æœ¨ï¼Œæ¯ä¸ªå¾®æœåŠ¡éƒ½æ˜¯ä¸€ä¸ªé›¶ä»¶ï¼Œå¹¶ä½¿...</p>
<p><a href="https://www.jianshu.com/u/d6e5ad19fcef"><img src="https://cdn2.jianshu.io/assets/default_avatar/10-e691107df16746d4a9f3fe9496fd1848.jpg" alt="" loading="lazy">é™ä¿®ä½›ç¼˜</a>é˜…è¯» 28</p>
<figure data-type="image" tabindex="3"><a href="https://www.jianshu.com/p/15d0a1c366b3"><img src="https://upload-images.jianshu.io/upload_images/1775814-8884b980e74daa5b?imageMogr2/auto-orient/strip%7CimageView2/1/w/300/h/240/format/webp" alt="" loading="lazy"></a></figure>
</li>
<li>
<p>Spring Cloud ä¸ºå¼€å‘äººå‘˜æä¾›äº†å¿«é€Ÿæ„å»ºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¸€äº›å¸¸è§æ¨¡å¼çš„å·¥å…·ï¼ˆä¾‹å¦‚é…ç½®ç®¡ç†ï¼ŒæœåŠ¡å‘ç°ï¼Œæ–­è·¯å™¨ï¼Œæ™º...</p>
<figure data-type="image" tabindex="4"><a href="https://www.jianshu.com/p/46fd0faecac1"><img src="https://upload-images.jianshu.io/upload_images/7328262-54f7992145380c10.png?imageMogr2/auto-orient/strip%7CimageView2/1/w/300/h/240/format/webp" alt="" loading="lazy"></a></figure>
</li>
<li>
<p>æ³¨ï¼šå‚è€ƒ Spring Security æ•´åˆ JSON Web Token(JWT) æå‡ REST å®‰å…¨æ€§ï¼Œå†™çš„...</p>
<figure data-type="image" tabindex="5"><a href="https://www.jianshu.com/p/beea4bc9056b"><img src="https://upload-images.jianshu.io/upload_images/3145530-7a18f4fd40be4d85.png?imageMogr2/auto-orient/strip%7CimageView2/1/w/300/h/240/format/webp" alt="" loading="lazy"></a></figure>
</li>
</ul>
]]></content>
    </entry>
</feed>